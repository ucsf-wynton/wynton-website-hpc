<!doctype html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>{% if page.title %}{{ page.title }}{% else %}{{ site.title | default: site.github.repository_name }}{% endif %}</title>

    <link rel="stylesheet" href="/hpc/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link href="/hpc/assets/css/ucsf-banners.css" rel="stylesheet">
    <link href="/hpc/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/hpc/assets/css/this_site.css" rel="stylesheet">
    <link href="/hpc/assets/css/broadcast.css" rel="stylesheet">
    <link href="/hpc/assets/css/checkbox-toggle.css" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="/hpc/assets/ico/favicon.ico?">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"><!-- ~90 kB --></script>
  {% if site.docsearch.api_key %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
    <link rel="stylesheet" href="/hpc/assets/css/docsearch.css" rel="stylesheet"/>
  {% endif %}
  </head>
  <body>
<nav class="navbar navbar-default navbar-fixed-top" id="topnavbar">
  <div class="top-banner logo">
    <div class="inner">
      <div>
        <div class="logo"></div>
        <a class="logotype" href="https://www.ucsf.edu/">
          <span>University of California San Francisco</span>
        </a>
      </div>
      <div class="nav">
        <ul class="top-banner-menu">
          <li><a href="https://www.ucsf.edu/about">About UCSF</a></li>
          <li><a href="https://www.ucsf.edu/search">Search UCSF</a></li>
        </ul>
      </div>
    </div>
  </div> 
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/hpc/index.html" title="{{ site.cluster.name }} - UCSF Research Computing at Scale">{{ site.cluster.name }} {{ site.cluster.version }}</a>
    </div>
    
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  {% if site.docsearch.api_key %}
          <ul class="nav navbar-nav">
           <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
            <div class="form-group">
              <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
                <label class="ds-input">
                  <input type="search" class="form-control ds-input" name="search-input" id="search-input" placeholder="Search" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" style="position: relative; vertical-align: top;" dir="auto" onfocus="document.getElementById('menunavbar').style.display='none';" onfocusout="document.getElementById('menunavbar').style.display='inline'; this.value='';">
                  <span style="visibility: hidden; font-size: 0pt;">Enter search string</span>
                </label>
                <pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15.4px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: optimizelegibility; text-transform: none;"></pre>
                <span class="ds-dropdown-menu" style="position: absolute; top: 100%; z-index: 100; left: 0px; right: auto; display: none;" role="listbox" id="algolia-autocomplete-listbox-0"><div class="ds-dataset-1"></div></span>
              </span>
             </div>
            </form>
          </ul>
        <li>
      </ul>
  {% endif %}

      <ul class="nav navbar-nav" id="menunavbar">
        <li>
          <a href="/hpc/status/index.html">Status<span class="status-led" style="background: {% if site.data.status.level == "warning" %}orange{% endif %}{% if site.data.status.level == "danger" %}red{% endif %};"></span></a>
        </li>
        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Get Started <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/get-started/access-cluster.html">1. Login &amp; Logout</a></li>
            <li><a href="/hpc/get-started/development-prototyping.html">2. Development / Prototyping</a></li>
            <li><a href="/hpc/get-started/hello-world-job.html">3. 'Hello World' Job</a></li>
            <li><a href="/hpc/get-started/good-practices.html">4. Good Practices</a></li>
            <li><a href="/hpc/get-started/duo-signup.html">5. 2FA Registration</a></li>
            <li><a href="/hpc/get-started/protected-quickstart.html">6. Wynton Protected Quickstart</a></li>
    </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Software <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/software/core-software.html">Core Software</a></li>
            <li><a href="/hpc/software/scl.html">Software Collections (SCL)</a></li>
            <li><a href="/hpc/software/software-modules.html">Software Modules</a></li>
            <li><a href="/hpc/software/software-repositories.html">Software Repositories</a></li>
            <li><a href="/hpc/software/apptainer.html">Linux Containers (Apptainer/Singularity)</a></li>
            <li><a href="/hpc/software/sbgrid.html">SBGrid Software (restricted access)</a></li>
            <li><a href="/hpc/software/missing-software.html">Missing Software?</a></li>
            <li><a href="/hpc/software/rocky-8-linux.html">Migration to Rocky 8 Linux (Nov 2023)</a><li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">SGE<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/scheduler/submit-jobs.html">Submit Jobs</a></li>
            <li><a href="/hpc/scheduler/list-jobs.html">List Jobs</a></li>
            <li><a href="/hpc/scheduler/kill-jobs.html">Kill Jobs</a></li>
            <li><a href="/hpc/scheduler/job-summary.html">Job Summary</a></li>
            <li><a href="/hpc/scheduler/envvars.html">Useful Env. Variables</a></li>
            <li><a href="/hpc/scheduler/using-local-scratch.html">Use Local Scratch</a></li>
            <li><a href="/hpc/scheduler/queues.html">Available Queues</a></li>
            <li><a href="/hpc/scheduler/email-notifications.html">Job Email Notifications</a></li>
            <li><a href="/hpc/scheduler/gpu.html">GPU Scheduling</a></li>
            <li><a href="/hpc/scheduler/advanced-usage.html">Advanced Usage</a></li>
          </ul>
        </li>
<!---
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Slurm Pilot<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/slurm/about-slurm.html">About Slurm</a></li>
            <li><a href="/hpc/slurm/sge-slurm.html">SGE to Slurm</a></li>
            <li><a href="/hpc/slurm/slurm-hello-world-job.html">Slurm 'Hello World' Job</a></li>
            <li><a href="/hpc/slurm/submit-jobs.html">Submit Slurm Jobs</a></li>
            <li><a href="/hpc/slurm/featuresandconstraints.html">Slurm Features and Constraints</a></li>
            <li><a href="/hpc/slurm/list-jobs.html">List Slurm Jobs</a></li>
            <li><a href="/hpc/slurm/cancel-jobs.html">Cancel Slurm Jobs</a></li>
            <li><a href="/hpc/slurm/job-summary.html">Slurm Job Summary</a></li>
            <li><a href="/hpc/slurm/slurm-envvars.html">Useful Slurm Environment Variables</a></li>
            <li><a href="/hpc/slurm/using-local-scratch.html">Use Slurm Local Scratch</a></li>
            <li><a href="/hpc/slurm/queues.html">Available Slurm Partitions</a></li>
            <li><a href="/hpc/slurm/email-notifications.html">Slurm Job Email Notifications</a></li>
            <li><a href="/hpc/slurm/gpu.html">Slurm GPU Scheduling</a></li>
            <li><a href="/hpc/slurm/advanced-usage.html">Slurm Advanced Usage</a></li>
          </ul>
        </li>
--->

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">File Transfers <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/transfers/files-and-directories.html">Secure Copy File Transfers</a></li>
            <li><a href="/hpc/transfers/globus.html">Globus File Transfers</a></li>
            <li><a href="/hpc/transfers/globus-sharing.html">Globus File Sharing</a></li>
            <li><a href="/hpc/transfers/ucsf-box.html">UCSF Box</a></li>
            <li><a href="/hpc/transfers/dos2unix.html">Windows-Unix File Transfers</a></li>
            <li><a href="/hpc/transfers/rclone.html">rclone (mount Wynton file system locally)</a></li>
          </ul>
        </li>

<!--
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Good Practices <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/good-practices/using-local-scratch.html">Use local scratch</a></li>
          </ul>
        </li>
-->

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">How To <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/howto/matlab.html">Work with MATLAB</a></li>
            <li><a href="/hpc/howto/python.html">Work with Python</a></li>
            <li><a href="/hpc/howto/jupyter.html">Work with Jupyter Notebook</a></li>
            <li><a href="/hpc/howto/r.html">Work with R</a></li>
            <li><a href="/hpc/howto/rstudio.html">Work with RStudio</a></li>
            <li><a href="/hpc/howto/conda.html">Work with Conda</a></li>
            <li><a href="/hpc/howto/conda-stage.html">Stage Conda Environment to Local Disk</a></li>
            <li><a href="/hpc/howto/install-from-source.html">Install Software from Source</a></li>
            <li><a href="/hpc/howto/storage-size.html">File Sizes and Disk Quotas</a></li>
            <li><a href="/hpc/howto/group-quota.html">Adjust Group Disk Quota</a></li>
            <li><a href="/hpc/howto/find-files.html">Find Files</a></li>
            <li><a href="/hpc/howto/log-in-without-pwd.html">Log in without Password</a></li>
<!--            <li><a href="/hpc/howto/compress-files-(as-a-job).html">Compress Files (via Job Queue)</a></li> -->
            <li><a href="/hpc/howto/change-pwd.html">Change & Verify Password</a></li>
            <li><a href="/hpc/howto/gui-x11fwd.html">GUIs (X2Go & X11)</a></li>
            <li><a href="/hpc/howto/jupyterhub.html">JupyterHub Server (DISCONTINUED)</a></li>  
          </ul>
        </li>

{% comment %}
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Troubleshooting <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/troubleshoot/ssh-n6-gives-permission-denied-(publickey).html">SSH Permission Denied?</a></li>
          </ul>
        </li>
{% endcomment %}

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Support <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/support/index.html">Support Channels</a></li>
            <li><a href="/hpc/support/faq.html">Frequently Asked Questions</a></li>
          </ul>
        </li>


        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/hpc/about/specs.html">Specifications</a></li>
            <li><a href="/hpc/about/gpus.html">Available GPUs</a></li>
            <li><a href="/hpc/about/news.html">News</a></li>
            <li><a href="/hpc/about/pricing-storage.html">Pricing: Extra Storage</a></li>
            <li><a href="/hpc/about/pricing-compute.html">Pricing: Extra Compute (CPU & GPU)</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/hpc/about/wynton-protected.html">Wynton Protected (P3 Data)</a></li> 
            <li><a href="/hpc/about/join.html">Join <span class="glyphicon glyphicon-heart-empty"></span></a></li>
            <li><a href="/hpc/about/shares.html">Contributing Member Shares</a></li>
<!--
            <li><a href="/hpc/about/code-of-conduct.html">Code of conduct</a></li>
-->
            <li role="separator" class="divider"></li>
            <li><a href="/hpc/about/governance.html">Governance</a></li>
            <li><a href="/hpc/about/user-agreement.html">User Agreement</a></li>
            <li><a href="/hpc/about/citation.html">How to Cite</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/hpc/about/contact.html">Contact</a></li>
          </ul>
        </li>
      </ul>

      <ul class="nav navbar-nav" style="float: right;">
        <li>
          <ul class="nav navbar-nav">
       <div style="padding: 15px;">
         Regular <label class="switch" title="View site as a Regular or Protected user">
           <input type="checkbox" id="toggle-protected" aria-label="Toggle Protected view"/>
           <span class="slider round"><span style="visibility: hidden; font-size: 0pt;">Toggle Protected view</span></span>
         </label> Protected
       </div>
          </ul>
        </li>
      </ul>
    </div>
  </div>
{% if site.events.downtime %}
<div id="banner-downtime" class="alert alert-info" role="alert" style="margin-top: 0ex; margin-bottom: 0ex; padding-top: 1ex; padding-bottom: 1ex; font-size: smaller; display: none" markdown="1">
<div id="downtime-scheduled" style="display: none">
⚠️ The cluster will shut down in <span id="downtime-delta">???</span> on <span id="downtime-scheduled-on">???</span>. <span id="downtime-scheduled-soon" style="display: none">Jobs submitted with a runtime beyond this cutoff time, will <em>not</em> be launched until after the downtime. Only jobs with a runtime less than <code>-l h_rt=<span id="downtime-runtime">???</span></code> have a chance to run before this scheduled downtime. If not specified, the default run time is <code>-l h_rt=336:00:00</code> (= 14 days).</span>
</div>
<div id="downtime-ongoing" style="display: none">
🚧 The cluster is undergoing a scheduled downtime since <span id="downtime-ongoing-on">???</span>.
</div>
</div>
{% endif %}
</nav>

<div id="wrap">
      <section>


        
{% if site.data.status.level == "danger" or page.url == "/hpc/status/" %}
<div class="alert alert-{{ site.data.status.level }}" role="alert" style="margin-top: 3ex; margin-bottom: 3ex; font-size: large;" markdown="1">
<strong>{{ site.cluster.name }} {{ site.data.status.condition }}</strong></br>
{% if site.data.status.message != nil %}<em>{{ site.data.status.message }}</em></br>{% endif %}
{% if page.url == "/hpc/status/" %}
{% if site.data.status.level != "info" %}
<a href="#upcoming-incidents">More details ...</a>
{% endif %}
{% else %}
<a href="/hpc/status/index.html#current-incidents">More details ...</a>
{% endif %}
</div>
{% endif %}

{% comment %}
<div class="alert alert-warning" role="alert">
2022-03-03: The Wynton webserver will be down for an hour or so today March 3, 2003. Please use <a href="https://ucsf-wynton.github.io/wynton-website-hpc/">https://ucsf-wynton.github.io/wynton-website-hpc/</a> in the meanwhile. This is due to the web servers being updated.
</div>
{% endcomment %}
        
{% unless page.context contains "login" or page.context contains "xfer" %}
{% if content contains "language-sh" %}
{% assign tmp_text = "1. Please note that login and data-transfer nodes are very limited, e.g. login nodes are for submitting and querying jobs and data-transfer nodes for downloading files. Make sure you are logged in to a development node for all other tasks.\n\n2. If you have a Protected account, make sure to use the Protected machines, e.g. log1 -> plog1, dev1 -> pdev1, etc." %}
<div align="right">
<span style="font-size: smaller; font-style: italic; text-decoration: underline;" title="{{ tmp_text }}" onclick="alert(&quot;{{ tmp_text }}&quot;)"/>Examples not working?</span>
</div>
{% endif %}
{% endunless %}
        
{% comment %}
An alternative to {{ content }} that injects anchor links
The styling (e.g. appear on hover) is done in CSS
Source: https://github.com/allejo/jekyll-anchor-headings
{% endcomment %}
{% include anchor_headings.html html=content anchorBody="#" anchorClass="anchor-heading" %}

      </section>
      <footer>
     {% assign page_url = page.url | remove: '.html' %}
     {% if page_url == '/' %}
     {% assign page_url = '/index' %}
     {% endif %}
     <span style="float: right;">       
       <a href="{{ site.github.owner_url }}/{{ site.github.repository_name }}/commits/master/docs{{ page_url | append: '.md' | replace_first: '/.md', '/index.md' }}" id="edit" target="_blank" rel="noopener noreferrer"><span class="glyphicon glyphicon-time" title="Change log for this page"></span><span style="visibility: hidden; font-size: 0pt;">Change log for this page</span></a>
       :
     <a href="{{ site.github.owner_url }}/{{ site.github.repository_name }}/tree/master/docs{{ page_url | append: '.md' | replace_first: '/.md', '/index.md' }}" id="edit" target="_blank" rel="noopener noreferrer"><span class="glyphicon glyphicon-edit" title="Contribute to this page"></span><span style="visibility: hidden; font-size: 0pt;">Contribute to this page</span></a>
     </span>
<p class="muted credit" style="font-size: inherits;">
<a href="https://www.ucsf.edu/">UCSF</a> ::
<a href="{{ site.organization.url }}">{{ site.organization.name }}</a> :: 
<a href="/hpc/">{{ site.cluster.name }}</a>
</p>
      </footer>
    </div>
    <script src="{{ site.baseurl }}/assets/js/scale.fix.js"></script>
    
    <script src="/hpc/assets/js/bootstrap.min.js"></script><!-- 38.8 kB -->

    
<script>
  $(document).ready(function(){
      /***********************************************************
        View as: Regular/Protected

        IMPORTANTLY:
        Updating the innerHTML destroys the click event listeners,
        so it has to be added *after* updating innerHTML.
        FIXME: Does this destroy other event listeners to? /HB 2023-01-19
       ***********************************************************/
      var href = window.location.href;
      var params = new URL(href).searchParams;
      var protected;

      /* Get 'protected' via URL parameter, otherwise via local storage */
      protected = params.get("protected");
      if (protected == null) {
          protected = localStorage.getItem("protected-mode");
          if (protected == null) {
              /* LEGACY: If 'protected-mode' is not stored, pull legacy
                 'phi-mode' value and save as 'protected-mode',
                 then remove 'phi-mode' / 2025-07-15 */
              protected = localStorage.getItem("phi-mode");
              if (protected !== null) {
                  localStorage.setItem("protected-mode", protected);
                  localStorage.removeItem("phi-mode");
              }
          }
      } else {
        localStorage.setItem("protected-mode", protected);
      }
      protected = (protected == "true");

      // Toggle HTML elements of class 'protected'/'non-protected' on and off
      if (protected) {
          $(".protected").css("display", "inline");
          $(".non-protected").css("display", "none");
      } else {
          $(".non-protected").css("display", "inline");
          $(".protected").css("display", "none");
      }

      // View as PROTECTED?
      if (protected) {
          // Skip page completely?
          var skip = false;
          skip = /\b(index.html|status|protected-quickstart|phi-quickstart|rocky-8-linux|news|roadmap|specs)\b/.test(href);
          if (!skip) {
              var html = document.body.innerHTML;

              // Add 'p'-prefix to all log[1-2],dt[1-2],dev[1-3],gpudev[1]?
              html = html.replace(/\b((log|dev|dt|gpudev)[1-9[])/gi, "p$1");

              // plog2 doesn't exist, so use plog1
              html = html.replace(/\bplog2/gi, "plog1");

              // pdev[2-3] doesn't exist, so use pdev1
              html = html.replace(/\bpdev[23]/gi, "pdev1");
              
              // Tweak IP-numbers
              // log1 -> plog1:
              html = html.replace(/172[.]26[.]44[.]11/g, "172.26.44.16");
              // log2 -> plog1:
              html = html.replace(/172[.]26[.]44[.]12/g, "172.26.44.16");
              // dt1 -> pdt1:
              html = html.replace(/172[.]26[.]44[.]21/g, "172.26.44.26");
              // dt2 -> pdt2:
              html = html.replace(/172[.]26[.]44[.]22/g, "172.26.44.27");
              // dev[1-3] -> pdev1:
              html = html.replace(/172[.]26[.]44[.](131|132|133)/g, "172.26.44.151");
              // gpudev1 -> pgpudev1:
              html = html.replace(/172[.]26[.]44[.]141/g, "172.26.44.161");
              
              // Tweak paths
              html = html.replace(/[/]wynton[/](home|group)[/](boblab|your_group)/gi, "/wynton/protected/$1/$2");
              document.body.innerHTML = html;
          }
      }

      // Main PROTECTED toggle switch
      const toggleProtected = document.getElementById("toggle-protected");
      toggleProtected.checked = protected;

      // Support for an optional, second PROTECTED toggle switch
      const toggleProtected2 = document.getElementById("toggle-protected-2");
      if (toggleProtected2) {
          toggleProtected2.checked = protected;
          
          toggleProtected.addEventListener("click", function(e) {
//              toggleProtected2.checked = toggleProtected.checked;
              localStorage.setItem("protected-mode", toggleProtected.checked);
              location.reload();
          });
          
          toggleProtected2.addEventListener("click", function(e) {
//              toggleProtected.checked = toggleProtected2.checked;
              localStorage.setItem("protected-mode", toggleProtected2.checked);
              location.reload();
          });
      } else {
          toggleProtected.addEventListener("click", function(e) {
              localStorage.setItem("protected-mode", toggleProtected.checked);
              location.reload();
          });
      }
      
      $(document.body).css('padding-top', $('#topnavbar').height() + 10);
      
      $(window).resize(function(){
          $(document.body).css('padding-top', $('#topnavbar').height() + 10);
      });
  });
</script>


{% if site.events.downtime %}
<script type="application/javascript">

function formatTimestamp(timestamp) {
    const weekdays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    const weekday = weekdays[timestamp.getDay()];

    const year    = timestamp.getFullYear();
    const month   = timestamp.getMonth() + 1;
    const day     = timestamp.getDate();
    const hours   = timestamp.getHours();
    const minutes = timestamp.getMinutes();

    const month_str   =   (month < 10) ? `0${month}`   : month;
    const day_str     =     (day < 10) ? `0${day}`     : day;
    const hours_str   =   (hours < 10) ? `0${hours}`   : hours;
    const minutes_str = (minutes < 10) ? `0${minutes}` : minutes;

    return `${weekday} ${year}-${month_str}-${day_str} at ${hours_str}:${minutes_str}`;
}

function formatTimeDiff(delta_ms) {
    var delta = delta_ms / 1000;
    const days    = Math.floor(delta / (24 * 60 * 60));
    const hours   = Math.floor(delta % (24 * 60 * 60) / (60 * 60));
    const minutes = Math.floor(delta % (60 * 60) / 60);

    const days_str    = (days == 1) ? '1 day' : `${days} days`;
    const hours_str   = (hours == 1) ? '1 hour' : `${hours} hours`;
    const minutes_str = (minutes == 1) ? '1 minute' : `${minutes} minutes`;

    var msg = minutes_str;
    if (hours > 0) msg = `${hours_str} and ${msg}`;  
    if (days > 0) msg = `${days_str}, ${msg}`;  
                                   
    return msg;
}                                   

function formatRuntimeHours(delta_ms) {
    var delta = delta_ms / 1000;
    const hours   = Math.floor(delta / (60 * 60));
    const minutes = Math.floor(delta % (60 * 60) / 60);
    const minutes_str = (minutes < 10) ? `0${minutes}` : minutes;
    return `${hours}:${minutes_str}:00`;
}                                   

const downtime_str = '{{ site.events.downtime }}';
if (downtime_str != "") {
    const downtime_begin = new Date(downtime_str);
    const now = Date.now();
    const delta_ms = (downtime_begin - now);
    if (delta_ms > 0) {
        document.getElementById("downtime-scheduled-on").innerHTML = formatTimestamp(downtime_begin);
    
        document.getElementById("downtime-delta").innerHTML = formatTimeDiff(delta_ms);
        document.getElementById("downtime-runtime").innerHTML = formatRuntimeHours(delta_ms);
                                       
        if (delta_ms / 1000 < 14 * 24 * 60 * 60) {
            document.getElementById("downtime-scheduled-soon").style.display = "inline";
        }            
        document.getElementById("downtime-scheduled").style.display = "block";
    } else {
        document.getElementById("downtime-ongoing-on").innerHTML = formatTimestamp(downtime_begin);
        document.getElementById("downtime-ongoing").style.display = "block";
    }

    var banner = document.getElementById("banner-downtime");
    // Is shutdown happening within 3 hours or 14 days? 
    if (delta_ms / 1000 < 3 * 60 * 60) {
        banner.className = "alert alert-danger";
    } else if (delta_ms / 1000 < 14 * 24 * 60 * 60) {
        banner.className = "alert alert-warning";
    }
    
    banner.style.display = "block";
}      
</script>
{% endif %}


 <script>
    $("a[href^='http']:not([href*='ucsf.edu']):not([href*='github.io']):not([id*='edit'])").each(function() {
      $(this).css({
        "background": "url(https://www.google.com/s2/favicons?domain=" +
                       this.href + ") right center no-repeat",
        "background-size": "16px",
        "padding-right": "20px"
      });
    });
  </script>

  {% if site.google_analytics %}
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '{{ site.google_analytics }}', 'auto');
        ga('send', 'pageview');
    </script>
  {% endif %}
  {% if site.docsearch.api_key %}
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
    apiKey: '{{ site.docsearch.api_key }}',
    indexName: '{{ site.docsearch.index_name }}',
    inputSelector: 'input#search-input.form-control',
    debug: false // Set debug to true if you want to inspect the dropdown
    });
    </script>     
  {% endif %}
{% comment %}
    <script>
        if (window.location.href.startsWith("https://ucsf-hpc.github.io/wynton/")) {
              window.location.href = window.location.href.replace('https://ucsf-hpc.github.io/wynton/', 'https://wynton.ucsf.edu/hpc/');
        }
    </script>    
{% endcomment %}
  </body>
</html>
